@{
    ViewBag.Title = "Pantalla Inicial";
}

<nav class="navbar navbar-expand-sm  header">
    <div class="container-fluid">
        <img src="https://wp.uaslp.mx/informe/wp-content/uploads/sites/2/2024/04/UASLP.png" alt="" style="max-width: 15%;">
        <div class="rounded-pill">
            <h4>tomas tapia</h4>
            <button class="btn btn-outline-light"><a href="iniciar-sesion.html">Cerrar sesión </a> </button>

        </div>
    </div>
</nav>

<div style="padding: 1%">
    
        <form id="searchForm" method="post" action="@Url.Action("BuscarCorredores", "Home")">
            <!-- Formulario en una línea con distribución de dos mitades -->
            <div class="d-flex justify-content-between">
                <div class="w-50">
                    <div class="form-group w-100">
                        <input type="text" id="searchInput" name="nombre" class="form-control w-100" placeholder="Buscar corredor por nombre (opcional)">
                    </div>
                </div>
                <div class="w-50 d-flex justify-content-end">
                    <div class="form-group mx-2">
                        <label for="yearDropdown">Año:</label>
                        <select id="yearDropdown" name="yearCarrera" class="form-control">
                            <option value="">Selecciona un año</option>
                            @foreach (var year in ViewBag.Anios)
                            {
                                <option value="@year">@year</option>
                            }
                        </select>
                    </div>
                    <div class="form-group mx-2">
                        <label for="edicionDropdown">Edición:</label>
                        <select id="edicionDropdown" name="ediCarrera" class="form-control" disabled>
                            <option value="">Selecciona una edición</option>
                        </select>
                    </div>
                    <div class="form-group mx-2">
                        <label for="categoriaDropdown">Categoría:</label>
                        <select id="categoriaDropdown" name="categoria" class="form-control" disabled>
                            <option value="">Selecciona una categoría</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary mx-2">Buscar</button>
                </div>
            </div>
        </form>
    </div>

    @if (!string.IsNullOrEmpty(ViewBag.Error))
    {
        <div class="alert alert-danger">@ViewBag.Error</div>
    }


    <div class="row"> <!-- Tabla de resultados (ocupa la mitad de la pantalla) -->
<div class="col-6 ">
    <div id="resultTable" class="mt-4" style="width: 50%; margin-left: 2%: auto;">
      
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Posición</th>
                        <th>Número de Corredor</th>
                        <th>Nombre de Corredor</th>
                        <th>T1</th>
                        <th>T2</th>
                        <th>T3</th>
                        <th>Tiempo Registrado</th>
                    </tr>
                </thead>
            @if (ViewBag.ResultadosBusqueda != null && ViewBag.ResultadosBusqueda.Count > 0)
            {
                <tbody>
                    @foreach (var item in ViewBag.ResultadosBusqueda)
                    {
                        <tr>
                            <td>@item["Posicion"]</td>
                            <td>@item["NumCorredor"]</td>
                            <td>@item["NombreCorredor"]</td>
                            <td>@item["T1"]</td>
                            <td>@item["T2"]</td>
                            <td>@item["T3"]</td>
                            <td>@item["TiempoTotal"]</td>
                        </tr>
                    }
                </tbody>
            }
            else
            {
                <p>No se encontraron resultados.</p>
            }
            </table>
      
    </div>
</div>
    <div class="col-5 " style="text-align: center;">

        <img style="width: 30%; height:45%;" src="https://cdn-icons-png.flaticon.com/512/1986/1986941.png" alt="">
        <br><br>
        <div class="row">
            <div class="col-2"></div>
            <div class="col-4">
                <div class="dropdown">
                    <button type="button" class="btn btn-outline-light dropdown-toggle" style="background-color:#004A98; width:max-content;" data-bs-toggle="dropdown" id="gestionCorredor" aria-expanded="false">Gestión de corredores</button>
                    <ul class="dropdown-menu" aria-labelledby="gestionCorredor">
                        <li><button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#nuevoCorredor">Nuevo corredor</button></li>
                        <li><button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#eliminaCorredor">Elimina corredor</button></li>
                        <li><button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#modificarCorredor">Modificar corredor</button></li>
                        <li><button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#importarCorredoresModal">Importar corredores</button></li>
                        <li><button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#exportarCorredoresModal">Exportar corredores</button></li>
                        <li><button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#reporteCorredorModal">Generar reporte de corredor</button></li>
                    </ul>
                </div>
            </div>
            <div class="col-4"><button class="btn btn-outline-light " style="background-color:#004A98 ;width:max-content;">Exportar resultados</button></div>
        </div>
        <br>
        <br>
        <div class="row">
            <div class="col-2"></div>
            <div class="col-4"><button class="btn btn-outline-light" style="background-color:#004A98; width:max-content;">Mostrar base de datos </button></div>
            <div class="col-4">
                <div class="dropdown">
                    <button type="button" class="btn btn-outline-light dropdown-toggle" style="background-color:#004A98 ;width:max-content;" data-bs-toggle="dropdown" id="gestionCarreras" aria-expanded="false">Gestión de carreras</button>
                    <ul class="dropdown-menu" aria-labelledby="gestionCarreras">
                        <li><button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#nuevaCarrera">Nueva carrera</button></li>
                        <li><button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#eliminarCarrera">Eliminar carrera</button></li>
                        <li><button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#modificarCarrera">Modificar carrera</button></li>
                        <li><button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#">Vincular participantes</button></li>
                        <li><button class="dropdown-item" type="button" data-bs-toggle="modal" data-bs-target="#reporteCarrera">Generar reporte de carrera</button></li>
                    </ul>
                </div>
            </div>

        </div>
    </div>


    <!-- New Runner Modal -->
    <div id="nuevoCorredor" class="modal fade" bs-backdrop="static" bs-keyboard="false" tabindex="-1" aria-labelledby="menuNuevoCorredor" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div id="cabeceraMenu" class="modal-header">
                    <h5 class="modal-title" id="menuNuevoCorredor">Nuevo Corredor</h5>
                </div>
                <div class="modal-body">
                    <form asp-action="Alta_Corredor" method="post">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="nom_corredor" class="form-label">*Nombre(s):</label>
                                <input type="text" class="form-control" id="nom_corredor" name="nom_corredor" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="apP_corredor" class="form-label">*Apellido paterno:</label>
                                <input type="text" class="form-control" id="apP_corredor" name="apP_corredor" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="apM_corredor" class="form-label">Apellido materno:</label>
                                <input type="text" class="form-control" id="apM_corredor" name="apM_corredor">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="f_corredor" class="form-label">*Fecha de nacimiento:</label>
                                <input type="date" class="form-control" id="f_corredor" name="f_corredor" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="sex_corredor" class="form-label">*Sexo:</label>
                                <select class="form-select" id="sex_corredor" name="sex_corredor" required>
                                    <option value="">Seleccione...</option>
                                    <option value="M">Masculino</option>
                                    <option value="F">Femenino</option>
                                    <option value="O">Otro</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="c_corredor" class="form-label">Correo electrónico:</label>
                                <input type="email" class="form-control" id="c_corredor" name="c_corredor">
                            </div>
                        </div>
                        <div class="row">
                            <div class="btn-group col-4">
                                <div class="form-floating">
                                    <select class="form-select" id="floatingSelectAno" name="ano" aria-label="Floating label select example">
                                        <option selected>Seleccione el año</option>
                                        <option value="2022">2022</option>
                                        <option value="2023">2023</option>
                                        <option value="2024">2024</option>
                                    </select>
                                    <label for="floatingSelectAno">Año</label>
                                </div>
                            </div>

                            <div class="btn-group col-4">
                                <div class="form-floating">
                                    <select class="form-select" id="floatingSelectEdicion" name="edicion" aria-label="Floating label select example">
                                        <option selected>Seleccione la edición</option>
                                        <option value="primavera">Primavera</option>
                                        <option value="verano">Verano</option>
                                        <option value="otoño">Otoño</option>
                                    </select>
                                    <label for="floatingSelectEdicion">Edición</label>
                                </div>
                            </div>

                            <div class="btn-group col-4">
                                <div class="form-floating">
                                    <select class="form-select" id="floatingSelectCategoria" name="categoria" aria-label="Floating label select example">
                                        <option selected>Seleccione la categoría</option>
                                        <option value="5">5 KM</option>
                                        <option value="10">10 KM</option>
                                        <option value="21">21 KM</option>
                                    </select>
                                    <label for="floatingSelectCategoria">Categoría</label>
                                </div>
                            </div>
                        </div>
                        <p class="text-danger">Los campos marcados con un * son obligatorios.</p>
                        <div class="row">

                            <div class="col-6"><button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button></div>
                            <div class="col-6"> <button type="submit" class="btn btn-primary">Registrar</button></div>

                        </div>
                       
                    </form>

                </div>
                <div class="modal-footer">
                    
                    <div class="ms-auto">
                        <button type="submit" class="btn btn-primary">Agregar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para eliminar corredor -->
    <div id="eliminaCorredor" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="menuEliminarCorredor" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div id="cabeceraMenu" class="modal-header">
                    <h5 class="modal-title" id="menuEliminaCorredor">Eliminar Corredor</h5>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-6">
                            <h3>Información de la carrera</h3>
                            <div class="row mb-3">
                                <label class="col-sm-4 col-form-label">Año</label>
                                <div class="col-sm-8">
                                    <div class="input-group">
                                        <input type="text" class="form-control">
                                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false"></button>
                                        <ul class="dropdown-menu dropdown-menu-end">
                                            <li><a class="dropdown-item" href="#">2024</a></li>
                                            <li><a class="dropdown-item" href="#">2023</a></li>
                                            <li><a class="dropdown-item" href="#">2022</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-4 col-form-label">Edición</label>
                                <div class="col-sm-8">
                                    <div class="input-group">
                                        <input type="text" class="form-control">
                                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false"></button>
                                        <ul class="dropdown-menu dropdown-menu-end">
                                            <li><a class="dropdown-item" href="#">1</a></li>
                                            <li><a class="dropdown-item" href="#">2</a></li>
                                            <li><a class="dropdown-item" href="#">3</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <h3>Información del corredor</h3>
                            <div class="row mb-3">
                                <label class="col-sm-4 col-form-label">Clave del corredor</label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-4 col-form-label">Num. de corredor</label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control">
                                    <button class="btn btn-outline-primary mt-2">Buscar</button>
                                </div>
                            </div>
                        </div>

                        <div class="col-6" style="background-color: #ecebeb; border-radius: 5px;">
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">Nombre</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">Apellido paterno</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">Apellido materno</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">Fecha de nacimiento</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">País</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">Sexo</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">Teléfono</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">Correo electrónico</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">categoria</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancelar</button>
                    <div class="ms-auto">
                        <button type="submit" class="btn btn-danger">Eliminar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para modificar corredor -->
    <div id="modificarCorredor" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="menuModificarCorredor" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div id="cabeceraMenu" class="modal-header">
                    <h5 class="modal-title" id="menuModificarCorredor">Modificar Corredor</h5>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-6">
                            <h3>Información de la carrera</h3>
                            <div class="row mb-3">
                                <label class="col-sm-4 col-form-label">Año</label>
                                <div class="col-sm-8">
                                    <input type="number" class="form-control" id="year" placeholder="Año">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-4 col-form-label">Edición</label>
                                <div class="col-sm-8">
                                    <input type="number" class="form-control" id="edition" placeholder="Edición">
                                </div>
                            </div>
                            <h3>Información del corredor</h3>
                            <div class="row mb-3">
                                <label class="col-sm-5 col-form-label">Clave del corredor</label>
                                <div class="col-sm-7">
                                    <input type="number" class="form-control" id="runnerKey" placeholder="Clave corredor">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-5 col-form-label">Número de corredor</label>
                                <div class="col-sm-7">
                                    <input type="number" class="form-control" id="runnerNumber" placeholder="Número de corredor">
                                </div>
                            </div>
                            <button type="button" class="btn btn-primary mt-3">Buscar</button>
                        </div>

                        <div class="col-6" style="background-color: #ecebeb; border-radius: 5px;">
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">Nombre(s)</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="name" placeholder="Nombre(s)">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">Apellido Paterno</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="firstLastname" placeholder="Apellido Paterno">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">Apellido Materno</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="secondLastname" placeholder="Apellido Materno">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">Fecha de nacimiento</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="birthdate" placeholder="Fecha de nacimiento">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">País</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="country" placeholder="País">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">Sexo</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="gender" placeholder="Sexo">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">Teléfono</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="phoneNumber" placeholder="Teléfono">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label class="col-sm-6 col-form-label">Correo electrónico</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="email" placeholder="Correo electrónico">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
                    <div class="ms-auto">
                        <button type="submit" class="btn btn-primary">Guardar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="importarCorredoresModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="menuImportarCorredores" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div id="cabeceraMenu" class="modal-header">
                    <h5 class="modal-title" id="menuImportarCorredores">Importar Corredores</h5>
                </div>
                <div class="container">
                    <form asp-controller="Home" asp-action="Upload" method="post" enctype="multipart/form-data">
                        <div class="form-group">
                            <label for="fileUpload">Selecciona un archivo Excel (.xlsx)</label>
                            <input type="file" class="form-control-file" id="fileUpload" name="fileUpload" accept=".xlsx" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Subir</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
                    <div class="ms-auto">
                        <button type="submit" class="btn btn-primary">Importar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal para Exportar Corredores -->
    <div id="exportarCorredoresModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="menuExportarCorredores" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div id="cabeceraMenu" class="modal-header">
                    <h5 class="modal-title" id="menuExportarCorredores">Exportar Resultados</h5>
                </div>
                <div class="modal-body">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12">
                                <table class="table table-hover table-fixed table-primary table-striped table-bordered border-dark">
                                    <thead class="table-light">
                                        <tr>
                                            <th style="width: 90px;" scope="col">Posición</th>
                                            <th style="width: 90px;" scope="col">Número</th>
                                            <th style="width: 200px;" scope="col">Nombre</th>
                                            <th style="width: 90px;" scope="col">T1</th>
                                            <th style="width: 90px;" scope="col">T2</th>
                                            <th style="width: 90px;" scope="col">T3</th>
                                            <th style="width: 150px;" scope="col">Tiempo Total</th>
                                        </tr>
                                    </thead>
                                    <tbody style="height: 300px;">
                                        <tr>
                                            <td style="width: 90px;">1</td>
                                            <td style="width: 90px;">001</td>
                                            <td style="width: 200px;">Juan Pérez</td>
                                            <td style="width: 90px;">00:10:00</td>
                                            <td style="width: 90px;">00:15:00</td>
                                            <td style="width: 90px;">00:20:00</td>
                                            <td style="width: 150px;">00:45:00</td>
                                        </tr>
                                        <!-- Repetir filas según sea necesario -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-3">
                        <div class="col-md-6">
                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                        </div>
                        <div class="col-md-6 text-end">
                            <button type="button" class="btn btn-primary btn-lg">Exportar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Reporte de Corredor -->
    <div id="reporteCorredorModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="menuReporteCorredor" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div id="cabeceraMenu" class="modal-header">
                    <h5 class="modal-title" id="menuReporteCorredor">Datos del reporte general</h5>
                </div>
                <div class="modal-body">
                    <div>
                        <div class="row py-1">
                            <div class="col-md-6 mb-3">
                                <label for="name" class="form-label">Nombre(s):</label>
                                <input type="text" class="form-control" id="name" placeholder="Nombre">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="firstLastname" class="form-label">Apellido Paterno:</label>
                                <input type="text" class="form-control" id="firstLastname" placeholder="Apellido Paterno">
                            </div>
                        </div>
                        <div class="row py-1">
                            <div class="col-md-6 mb-3">
                                <label for="secondLastname" class="form-label">Apellido Materno:</label>
                                <input type="text" class="form-control" id="secondLastname" placeholder="Apellido Materno">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="gender" class="form-label">Sexo:</label>
                                <input type="text" class="form-control" id="gender" placeholder="Sexo">
                            </div>
                        </div>
                        <div class="row py-1">
                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label">Correo electrónico:</label>
                                <input type="text" class="form-control" id="email" placeholder="Correo electrónico">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="birthdate" class="form-label">Fecha de Nacimiento:</label>
                                <input type="text" class="form-control" id="birthdate" placeholder="Fecha de Nacimiento">
                            </div>
                        </div>
                        <div class="row py-1">
                            <div class="col-md-6 mb-3">
                                <label for="country" class="form-label">País:</label>
                                <input type="text" class="form-control" id="country" placeholder="País">
                            </div>
                        </div>
                        <div class="row py-3">
                            <table class="table">
                                <thead class="table-dark">
                                    <tr>
                                        <th scope="col">Nombre de la carrera</th>
                                        <th scope="col">Año</th>
                                        <th scope="col">Edición</th>
                                        <th scope="col">Categoría</th>
                                        <th scope="col">Posición</th>
                                        <th scope="col">Número</th>
                                        <th scope="col">T1</th>
                                        <th scope="col">T2</th>
                                        <th scope="col">T3</th>
                                        <th scope="col">Tiempo Total</th>
                                    </tr>
                                </thead>
                                <tbody class="table table-striped ">
                                    <tr>
                                        <td>Carrera 1</td>
                                        <td>2024</td>
                                        <td>1</td>
                                        <td>Adultos</td>
                                        <td>3</td>
                                        <td>001</td>
                                        <td>00:10:00</td>
                                        <td>00:15:00</td>
                                        <td>00:20:00</td>
                                        <td>00:45:00</td>
                                    </tr>
                                    <tr>
                                        <td>Carrera 1</td>
                                        <td>2024</td>
                                        <td>1</td>
                                        <td>Adultos</td>
                                        <td>3</td>
                                        <td>001</td>
                                        <td>00:10:00</td>
                                        <td>00:15:00</td>
                                        <td>00:20:00</td>
                                        <td>00:45:00</td>
                                    </tr>
                                    <!-- Añadir más filas según sea necesario -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary ms-auto">Guardar</button> <!-- Botón "Guardar" alineado a la derecha -->
                </div>
            </div>
        </div>
    </div>



   <!-- New Race Modal -->
<div id="nuevaCarrera" class="modal fade" bs-backdrop="static" bs-keyboard="false" tabindex="-1" aria-labelledby="menuNuevaCarrera" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div id="cabeceraMenu" class="modal-header">
                <h5 class="modal-title" id="menuNuevaCarrera">Nueva carrera</h5>
            </div>
            <div class="modal-body">
                <form id="formAltaCarrera" method="post" action="/Home/Alta_Carrera">
                    <div>
                        <label for="nom_carrera">Nombre de la carrera:</label>
                        <input type="text" id="nom_carrera" name="nom_carrera" placeholder="Ej. Maratón 2024" required />
                    </div>
                    <div>
                        <label for="year_carrera">Año:</label>
                        <input type="number" id="year_carrera" name="year_carrera" placeholder="Ej. 2024" required />
                    </div>
                </form>

            </div>
            <!-- Botones -->
            <div style="display: flex; align-items: center; margin-top: 20px;">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal" id="btnCancelar">Cancelar</button>
                <div class="ms-auto">
                    <button type="button" class="btn btn-primary" onclick="generarCarrera()">Generar</button>
                </div>
            </div>
        </div>
    </div>
</div>
    <!-- Modal para eliminar carrera -->
    <div id="eliminarCarrera" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="menuEliminarCarrera" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div id="cabeceraMenu" class="modal-header">
                    <h5 class="modal-title" id="menuEliminarCarrera">Eliminar Carrera</h5>
                </div>
                <div class="modal-body" style="background-color: rgb(236, 235, 235); border-radius: 5px;">
                    <div class="row mb-3">
                        <label class="col-sm-5 col-form-label">Nombre de la carrera:</label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control" id="nombreCarrera" placeholder=" ">
                        </div>
                    </div>
                    <div class="row mb-3">
                        <label class="col-sm-5 col-form-label">Año:</label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control" id="anioCarrera" placeholder=" ">
                        </div>
                    </div>
                    <div class="row mb-3">
                        <label class="col-sm-5 col-form-label">Edición:</label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control" id="edicionCarrera" placeholder=" ">
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancelar</button>
                    <div class="ms-auto">
                        <button type="submit" class="btn btn-danger">Eliminar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para modificar carrera -->
    <div id="modificarCarrera" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="menuModificarCarrera" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div id="cabeceraMenu" class="modal-header">
                    <h5 class="modal-title" id="menuModificarCarrera">Modificar Carrera</h5>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-6">
                            <h5>Datos actuales de la carrera</h5>
                            <div class="row mb-3">
                                <label for="currentName" class="col-sm-5 col-form-label">Nombre de la carrera:</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control" id="currentName" placeholder="Nombre actual">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label for="currentYear" class="col-sm-5 col-form-label">Año:</label>
                                <div class="col-sm-7">
                                    <input type="number" class="form-control" id="currentYear" placeholder="Año actual">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label for="currentEdition" class="col-sm-5 col-form-label">Edición:</label>
                                <div class="col-sm-7">
                                    <input type="number" class="form-control" id="currentEdition" placeholder="Edición actual">
                                </div>
                            </div>
                        </div>

                        <div class="col-6">
                            <h5>Nuevos datos de la carrera</h5>
                            <div class="row mb-3">
                                <label for="newName" class="col-sm-5 col-form-label">Nuevo nombre:</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control" id="newName" placeholder="Nuevo nombre">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label for="newYear" class="col-sm-5 col-form-label">Nuevo año:</label>
                                <div class="col-sm-7">
                                    <input type="number" class="form-control" id="newYear" placeholder="Nuevo año">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label for="edition" class="col-sm-5 col-form-label">Nueva edición:</label>
                                <div class="col-sm-7">
                                    <input type="text" class="form-control" id="edition" placeholder="Nueva edición">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-secondary">Seleccionar</button>
                    <button type="button" class="btn btn-primary">Guardar</button>
                </div>
            </div>
        </div>
    </div>

    <div id="importarCorredoresModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="menuImportarCorredores" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div id="cabeceraMenu" class="modal-header">
                    <h5 class="modal-title" id="menuImportarCorredores">Importar Corredores</h5>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="carrera" class="form-label">*Nombre de la carrera:</label>
                                <select id="carrera" class="form-select" required>
                                    <option value="">Seleccione una opción</option>
                                    <option value="carrera1">Carrera 1</option>
                                    <option value="carrera2">Carrera 2</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="ano" class="form-label">*Año:</label>
                                <select id="ano" class="form-select" required>
                                    <option value="">Seleccione una opción</option>
                                    <option value="2024">2024</option>
                                    <option value="2023">2023</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="edicion" class="form-label">*Edición:</label>
                                <select id="edicion" class="form-select" required>
                                    <option value="">Seleccione una opción</option>
                                    <option value="1">Edición 1</option>
                                    <option value="2">Edición 2</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <label for="archivo" class="form-label">*Subir archivo:</label>
                                <div class="drop-area text-center p-4 border rounded">
                                    <p>Arrastra el archivo aquí o</p>
                                    <button type="button" class="btn btn-primary">Seleccionar archivo</button>
                                </div>
                            </div>
                        </div>
                        <p class="text-danger">Los campos marcados con un * son obligatorios.</p>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
                    <div class="ms-auto">
                        <button type="submit" class="btn btn-primary">Importar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--Generar reporte de carrera-->
    <div class="modal fade" id="reporteCarrera" bs-backdrop="static" bs-keyboard="false" tabindex="-1" aria-labelledby="menuReporteCarrera" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" id="cabeceraMenu">
                    <h5 class="modal-title" id="menuReporteCarrera">Datos de reporte general</h5>
                </div>
                <div class="modal-body">
                    <div class="d-flex gap-5 col-12 mx-auto">
                        <dl class="row">

                            <dt class="col-sm-4">
                                <h5>Mixta 10km:</h5>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Podio
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Menor tiempo
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Tiempo promedio
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Num. Hombres
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Num. Mujeres
                                    </label>
                                </div>
                            </dt>

                            <dt class="col-sm-4">
                                <h5>Mujeres 10km:</h5>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Podio
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Menor tiempo
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Tiempo promedio
                                    </label>
                                </div>
                            </dt>

                            <dt class="col-sm-4">
                                <h5>Hombres 10km:</h5>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Podio
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Menor tiempo
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Tiempo promedio
                                    </label>
                                </div>
                            </dt>

                            <dt class="col-sm-4">
                                <h5>Mixta 21km:</h5>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Podio
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Menor tiempo
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Tiempo promedio
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Num. Hombres
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Num. Mujeres
                                    </label>
                                </div>
                            </dt>

                            <dt class="col-sm-4">
                                <h5>Mujeres 21km:</h5>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Podio
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Menor tiempo
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Tiempo promedio
                                    </label>
                                </div>
                            </dt>

                            <dt class="col-sm-4">
                                <h5>Hombres 21km:</h5>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Podio
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Menor tiempo
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Tiempo promedio
                                    </label>
                                </div>
                            </dt>
                        </dl>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancelar</button>
                    <div class="ms-auto">
                        <button type="submit" class="btn btn-primary">Generar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        // Cuando cambia el año seleccionado
        $('#yearDropdown').change(function () {
            var year = $(this).val();
            if (year) {
                // Solicitar ediciones para el año seleccionado
                $.getJSON('/Home/CargarEdiciones', { yearCarrera: year }, function (data) {
                    $('#edicionDropdown').empty().append('<option value="">Selecciona una edición</option>');
                    $.each(data, function (i, item) {
                        $('#edicionDropdown').append($('<option>', {
                            value: item,
                            text: item
                        }));
                    });
                    $('#edicionDropdown').prop('disabled', false);
                    $('#categoriaDropdown').empty().append('<option value="">Selecciona una categoría</option>').prop('disabled', true);
                });
            } else {
                $('#edicionDropdown').empty().append('<option value="">Selecciona una edición</option>').prop('disabled', true);
                $('#categoriaDropdown').empty().append('<option value="">Selecciona una categoría</option>').prop('disabled', true);
            }
        });

        // Cuando cambia la edición seleccionada
        $('#edicionDropdown').change(function () {
            var year = $('#yearDropdown').val();
            var edicion = $(this).val();
            if (edicion) {
                // Solicitar categorías para la edición seleccionada
                $.getJSON('/Home/CargarCategorias', { yearCarrera: year, ediCarrera: edicion }, function (data) {
                    $('#categoriaDropdown').empty().append('<option value="">Selecciona una categoría</option>');
                    $.each(data, function (i, item) {
                        $('#categoriaDropdown').append($('<option>', {
                            value: item,
                            text: item
                        }));
                    });
                    $('#categoriaDropdown').prop('disabled', false);
                });
            } else {
                $('#categoriaDropdown').empty().append('<option value="">Selecciona una categoría</option>').prop('disabled', true);
            }
        });
    </script>

    <script>
        function generarCarrera() {
            const nombreCarrera = document.getElementById("nombreCarrera").value.trim();
            const anioCarrera = document.getElementById("anioCarrera").value.trim();

            if (!nombreCarrera || !anioCarrera) {
                alert("Por favor, complete todos los campos.");
                return;
            }

            fetch('/Home/Alta_Carrera', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    nom_carrera: nombreCarrera,
                    year_carrera: parseInt(anioCarrera),
                }),
            })
                .then(response => {
                    if (response.ok) {
                        alert("Carrera registrada exitosamente.");
                        location.reload(); // Refresca la página para reflejar los cambios
                    } else {
                        return response.text().then(text => {
                            throw new Error(text || "Error al registrar la carrera.");
                        });
                    }
                })
                .catch(error => {
                    console.error("Error:", error);
                    alert("Ocurrió un error al registrar la carrera.");
                });
        }
    </script>

    <script>
        document.getElementById("formAltaCarrera").addEventListener("submit", async function (event) {
            event.preventDefault(); // Evita que el formulario recargue la página

            const nomCarrera = document.getElementById("nom_carrera").value;
            const yearCarrera = document.getElementById("year_carrera").value;

            try {
                const response = await fetch("/Home/Alta_Carrera", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({ nom_carrera: nomCarrera, year_carrera: parseInt(yearCarrera) }),
                });

                const result = await response.json();

                if (result.success) {
                    alert(result.message); // Muestra el mensaje de éxito
                    window.location.href = "/Home/Index"; // Redirige a la pantalla principal
                } else {
                    alert(result.message); // Muestra el mensaje de error
                }
            } catch (error) {
                console.error("Error al registrar la carrera:", error);
                alert("Ocurrió un error al intentar registrar la carrera.");
            }
        });
    </script>
    <!-- SweetAlert para mensajes -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        document.getElementById("formAltaCarrera").addEventListener("submit", async function (event) {
            event.preventDefault(); // Evita la redirección por defecto del formulario

            // Captura los datos del formulario
            const form = event.target;
            const formData = new FormData(form);

            try {
                const response = await fetch(form.action, {
                    method: form.method,
                    body: formData,
                });

                if (response.ok) {
                    // Mensaje de éxito
                    Swal.fire("Éxito", "Carrera registrada exitosamente.", "success").then(() => {
                        window.location.href = "/Home/Pantalla_ini"; // Redirige a la pantalla principal
                    });
                } else {
                    const errorMessage = await response.text();
                    Swal.fire("Error", errorMessage || "No se pudo registrar la carrera.", "error");
                }
            } catch (error) {
                console.error("Error al procesar la solicitud:", error);
                Swal.fire("Error", "Ocurrió un error al intentar registrar la carrera.", "error");
            }
        });
    </script>

    <!-- SweetAlert para mensajes -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        // Funcionalidad para "Cancelar"
        document.getElementById("btnCancelar").addEventListener("click", function () {
            Swal.fire({
                title: "¿Estás seguro?",
                text: "No se guardarán los cambios.",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#d33",
                cancelButtonColor: "#3085d6",
                confirmButtonText: "Sí, cancelar",
                cancelButtonText: "No, continuar",
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = "/Home/Index"; // Redirige a la pantalla principal
                }
            });
        });

        // Funcionalidad para "Generar"
        async function generarCarrera() {
            // Captura los datos del formulario
            const nomCarrera = document.getElementById("nom_carrera").value.trim();
            const yearCarrera = parseInt(document.getElementById("year_carrera").value.trim(), 10);

            if (!nomCarrera || isNaN(yearCarrera) || yearCarrera <= 0) {
                Swal.fire("Error", "Por favor, llena todos los campos correctamente.", "error");
                return;
            }

            try {
                const form = document.getElementById("formAltaCarrera");
                const formData = new FormData(form);

                const response = await fetch(form.action, {
                    method: form.method,
                    body: formData,
                });

                if (response.ok) {
                    // Mensaje de éxito
                    Swal.fire("Éxito", "Carrera registrada exitosamente.", "success").then(() => {
                        window.location.href = "/Home/Pantalla_ini"; // Redirige a la pantalla principal
                    });
                } else {
                    const errorMessage = await response.text();
                    Swal.fire("Error", errorMessage || "No se pudo registrar la carrera.", "error");
                }
            } catch (error) {
                console.error("Error al procesar la solicitud:", error);
                Swal.fire("Error", "Ocurrió un error al intentar registrar la carrera.", "error");
            }
        }
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        // Cuando cambia el año seleccionado
        $('#yearDropdown').change(function () {
            var year = $(this).val();
            if (year) {
                // Solicitar ediciones para el año seleccionado
                $.getJSON('/Home/CargarEdiciones', { yearCarrera: year }, function (data) {
                    $('#edicionDropdown').empty().append('<option value="">Selecciona una edición</option>');
                    $.each(data, function (i, item) {
                        $('#edicionDropdown').append($('<option>', {
                            value: item,
                            text: item
                        }));
                    });
                    $('#edicionDropdown').prop('disabled', false);
                    $('#categoriaDropdown').empty().append('<option value="">Selecciona una categoría</option>').prop('disabled', true);
                });
            } else {
                $('#edicionDropdown').empty().append('<option value="">Selecciona una edición</option>').prop('disabled', true);
                $('#categoriaDropdown').empty().append('<option value="">Selecciona una categoría</option>').prop('disabled', true);
            }
        });

        // Cuando cambia la edición seleccionada
        $('#edicionDropdown').change(function () {
            var year = $('#yearDropdown').val();
            var edicion = $(this).val();
            if (edicion) {
                // Solicitar categorías para la edición seleccionada
                $.getJSON('/Home/CargarCategorias', { yearCarrera: year, ediCarrera: edicion }, function (data) {
                    $('#categoriaDropdown').empty().append('<option value="">Selecciona una categoría</option>');
                    $.each(data, function (i, item) {
                        $('#categoriaDropdown').append($('<option>', {
                            value: item,
                            text: item
                        }));
                    });
                    $('#categoriaDropdown').prop('disabled', false);
                });
            } else {
                $('#categoriaDropdown').empty().append('<option value="">Selecciona una categoría</option>').prop('disabled', true);
            }
        });
    </script>
